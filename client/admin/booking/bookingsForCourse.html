<template name="bookingsForCourse">
    <h1>Anmälningar till <a href="/admin/course/{{shortName}}">{{name}}</a></h1>

    <ul>
        <li>Publik anmälningssida: <a href="{{courseRegistrationUrl}}">{{courseRegistrationUrl}}</a></li>
        <li>Det finns just nu <a href="/admin/bookings/{{shortName}}">{{bookingCount}} anmälda</a> (av max {{bookingLimit}})</li>
        <li><a href="/admin/addBooking/{{shortName}}">Lägg upp ny anmälan manuellt</a></li>
        <li><a href="/admin/editCourse/{{shortName}}">Redigera kurs</a></li>

        <li>
            <a href="/admin/unpaidBookings/{{shortName}}">Betalstatus</a>
        </li>
        <li><a href="/admin/export/{{shortName}}" target="export">Exportera till Excel</a></li>
        <li>
            Skriv ut deltagarlista för: {{> datePeriodSelect}}
            {{#if selectedDatePeriod}}
                <button class="button btn-success btn-sm printBookingsButton">Skriv ut</button>
            {{/if}}
        </li>
    </ul>



    {{#if slots.count}}

        {{#each slots}}
            <div class="slot-bookings-section">

                <div class="slot-name">
                    {{name}}
                </div>
                {{> slotAvailability}}

                {{#if bookingCount}}
                    <div class="bookings-table">
                        <table class="data-table">
                            <tr>
                                <th>Förnamn</th>
                                <th>Efternamn</th>
                                <th>Betalat?</th>
                                <th>Personnummer</th>
                                <th>Postnr</th>
                                <th>Medlemsnr</th>
                                <th>Epost</th>
                                <th>Telefon</th>
                                <th>Datum</th>
                                <th>Kommentar</th>
                            </tr>

                            {{#each bookings}}
                                <tr>
                                    {{> inPlace collection=Bookings field="childFirstName" doc=this}}
                                    {{> inPlace collection=Bookings field="childLastName" doc=this}}

                                    <td>{{> paymentStatusButtons}}</td>
                                    {{> inPlace collection=Bookings field="childPersonNumber" doc=this}}
                                    {{> inPlace collection=Bookings field="childZip" doc=this}}
                                    {{> inPlace collection=Bookings field="childMembershipNumber" doc=this}}
                                    {{> inPlace collection=Bookings field="parentEmail" doc=this}}
                                    {{> inPlace collection=Bookings field="parentPhone" doc=this}}
                                    <td>{{formatDate creationTime}}</td>
                                    {{> inPlace collection=Bookings field="comment" doc=this}}
                                    <td>
                                        <button class="btn btn-warning btn-xs changeSlotButton" data-bookingid="{{_id}}">Byt grupp</button>
                                    </td>
                                    <td>
                                        <button class="btn btn-danger btn-xs removeButton" data-bookingid="{{_id}}">Avanmäl</button>
                                    </td>
                                </tr>
                            {{/each}}
                        </table>
                    </div>
                {{/if}}
            </div>

        {{/each}}



    {{/if}}


</template>